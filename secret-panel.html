<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="style.css">
  <title>Secret Panel</title>

  <style>
    body{
      font-family:system-ui;
      padding:20px;
    }

    .grid{
      display:flex;
      flex-wrap:wrap;
      gap:16px;
    }

    .card{
      padding:18px;
      border-radius:14px;
      background:#1f2b3d;
      min-width:240px;
      box-shadow:0 8px 20px rgba(0,0,0,.4);
    }

    .card h3{
      margin-bottom:10px;
    }

    .label{
      font-weight:bold;
      font-size:13px;
      margin-top:6px;
    }

    input{
      width:70px;
      padding:4px;
      border-radius:6px;
      border:none;
    }

    button{
      margin-top:10px;
      padding:6px 12px;
      border:none;
      border-radius:8px;
      cursor:pointer;
    }
  </style>
</head>

<body>

<h2>ğŸ¤« Secret Panel</h2>

<div id="games" class="grid"></div>


<script>

const gamesDiv = document.getElementById("games");


/* =================================================
   LOAD GAMES
================================================= */

async function load(){

  const list = await fetch("/games").then(r=>r.json());

  gamesDiv.innerHTML="";

  list.forEach(id=>{

    const d=document.createElement("div");
    d.className="card";

    d.innerHTML=`
      <h3>${id}</h3>

      <div class="label">ğŸ¥‡ Early 5</div>
      <input id="${id}e" type="number" min="1">

      <div class="label">ğŸ¥ˆ Top 3</div>
      <input id="${id}t" type="number" min="1">

      <div class="label">ğŸ¥‰ Bottom 4</div>
      <input id="${id}b" type="number" min="1">

      <div class="label">ğŸ† Full House</div>
      <input id="${id}f" type="number" min="1">

      <br>
      <button onclick="setSecret('${id}')">Save</button>

      <span id="${id}msg" style="margin-left:10px;color:lime;font-weight:bold"></span>
    `;

    gamesDiv.appendChild(d);
  });
}


/* =================================================
   SAFE NUMBER HELPER
================================================= */

function safeNum(val){
  if(!val) return null;
  const n = Number(val);
  return isNaN(n) ? null : n;
}


/* =================================================
   SAVE SECRET
================================================= */

async function setSecret(id){

  const data = {

    /* MUST MATCH SERVER KEYS EXACTLY */
    early5 : safeNum(document.getElementById(id+"e").value),
    top3   : safeNum(document.getElementById(id+"t").value),
    bot4   : safeNum(document.getElementById(id+"b").value),
    full   : safeNum(document.getElementById(id+"f").value)

  };

  await fetch("/secret/"+id,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(data)
  });

  const msg=document.getElementById(id+"msg");

  msg.innerText="Saved âœ…";

  setTimeout(()=>msg.innerText="",2000);
}


/* ================================================= */

load();

</script>

</body>
</html>

